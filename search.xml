<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Hennge challenge 3</title>
    <url>/en/2022/03/19/Hennge-challenge-3/</url>
    <content><![CDATA[<p>Last Sunday, I submitted my application for the Hennge Back-end(Tokyo, Japan) SDE position. After that, my mail box received a Challenge 3 email from Hennge. The challenge is very interesting. When I had enough free time on this Saturday, I finished this challenge finally. I spent about 3 hours on this. The process is here.</p>
<h2 id="Challenge-details"><a href="#Challenge-details" class="headerlink" title="Challenge details"></a>Challenge details</h2><p>The Challenge link is 403 after I submitted my solution. So, I share the process from my memory.<br>Fortunately, the archive is here: <a href="https://drive.google.com/file/d/1wWorFu889-DdEwuh9IAK2Eaei9rH1mGI/view?usp=sharing">Google Drive</a>.</p>
<p>First, implement a sum of squares of numbers program with Python/Go. You need to implement the input and output process by yourself.<br>Second, create a private github gist with the code.<br>Last, post the gist link to the Hennge server.</p>
<p>The code is very simple. I used Python to implement it.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> reduce</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    N = <span class="built_in">int</span>(<span class="built_in">input</span>())</span><br><span class="line">    ans = []</span><br><span class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(N):</span><br><span class="line">        X = <span class="built_in">int</span>(<span class="built_in">input</span>())</span><br><span class="line">        ans.append(reduce(<span class="keyword">lambda</span> x, y: x + (y * y <span class="keyword">if</span> y &gt; <span class="number">0</span> <span class="keyword">else</span> <span class="number">0</span>), <span class="built_in">map</span>(<span class="built_in">int</span>, <span class="built_in">input</span>().split()), <span class="number">0</span>))</span><br><span class="line">    <span class="built_in">print</span>(*ans, sep=<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>

<p>After struggle with Github two-factor authentication and manual account recovery review, I finally sign in to Github and created <a href="https://gist.github.com/YoungForest/329c22200e7fad36e6ef984e3afe0325">my gist</a>.</p>
<p>I think the hardest part is the authentication POST.</p>
<p>First, I needed to covert the shared secret to TOTP (Time-Based One-Time Password) with RFC 6238.<br>I tried to find a online tool to do that. But unfortunately, the current online tools have a limited options. For example, you can not choose the hash function as <code>HMAC-SHA-512</code> instead of default <code>HMAC-SHA-1</code>.<br>Therefore, as a result, I wrote a <a href="https://totp.youngforest.me/">TOTP Generator Online</a> by myself. Hope it could help you.<br>Fortunately, I found a sample Java implementation in <a href="https://datatracker.ietf.org/doc/html/rfc6238">the RFC 6238 document</a>. By the way, because the input in the code is a HEX string. I covert my shared secret <code>sen.yang96@outlook.comHENNGECHALLENGE003</code> to HEX string with <a href="https://www.convertstring.com/EncodeDecode/HexEncode">a online tool</a>. The challenge required a 10-digits code. The default in the code is 8-digits. I met this response using 8-digits.</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">     <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Access denied: Invalid token, malformed token&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>After I changed it to 10-digits, the error updated to:</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">     <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Access denied: Invalid token, wrong code&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>I debugged a lot and found that it is the issue of timestamp. Because TOTP is time-based.<br>When I change the timestamp to <code>Instant.now() + 30s</code>, the password passed:</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;message&quot;</span><span class="punctuation">:</span><span class="string">&quot;Congratulations! You have achieved mission 3&quot;</span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>The final code after my changes is:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">Copyright (c) 2011 IETF Trust and the persons identified as</span></span><br><span class="line"><span class="comment">authors of the code. All rights reserved.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Redistribution and use in source and binary forms, with or without</span></span><br><span class="line"><span class="comment">modification, is permitted pursuant to, and subject to the license</span></span><br><span class="line"><span class="comment">terms contained in, the Simplified BSD License set forth in Section</span></span><br><span class="line"><span class="comment">4.c of the IETF Trust&#x27;s Legal Provisions Relating to IETF Documents</span></span><br><span class="line"><span class="comment">(http://trustee.ietf.org/license-info).</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.UndeclaredThrowableException;</span><br><span class="line"><span class="keyword">import</span> java.security.GeneralSecurityException;</span><br><span class="line"><span class="keyword">import</span> java.text.DateFormat;</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> javax.crypto.Mac;</span><br><span class="line"><span class="keyword">import</span> javax.crypto.spec.SecretKeySpec;</span><br><span class="line"><span class="keyword">import</span> java.math.BigInteger;</span><br><span class="line"><span class="keyword">import</span> java.util.TimeZone;</span><br><span class="line"><span class="keyword">import</span> java.time.Instant;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * This is an example implementation of the OATH</span></span><br><span class="line"><span class="comment"> * TOTP algorithm.</span></span><br><span class="line"><span class="comment"> * Visit www.openauthentication.org for more information.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Johan Rydell, PortWise, Inc.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TOTP</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">TOTP</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * This method uses the JCE to provide the crypto algorithm.</span></span><br><span class="line"><span class="comment">     * HMAC computes a Hashed Message Authentication Code with the</span></span><br><span class="line"><span class="comment">     * crypto hash algorithm as a parameter.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> crypto:   the crypto algorithm (HmacSHA1, HmacSHA256,</span></span><br><span class="line"><span class="comment">     *                  HmacSHA512)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> keyBytes: the bytes to use for the HMAC key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> text:     the message or text to be authenticated</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">byte</span>[] hmac_sha(String crypto, <span class="type">byte</span>[] keyBytes,</span><br><span class="line">            <span class="type">byte</span>[] text) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Mac hmac;</span><br><span class="line">            hmac = Mac.getInstance(crypto);</span><br><span class="line">            <span class="type">SecretKeySpec</span> <span class="variable">macKey</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SecretKeySpec</span>(keyBytes, <span class="string">&quot;RAW&quot;</span>);</span><br><span class="line">            hmac.init(macKey);</span><br><span class="line">            <span class="keyword">return</span> hmac.doFinal(text);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (GeneralSecurityException gse) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UndeclaredThrowableException</span>(gse);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * This method converts a HEX string to Byte[]</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> hex: the HEX string</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: a byte array</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">byte</span>[] hexStr2Bytes(String hex) &#123;</span><br><span class="line">        <span class="comment">// Adding one byte to get the right conversion</span></span><br><span class="line">        <span class="comment">// Values starting with &quot;0&quot; can be converted</span></span><br><span class="line">        <span class="type">byte</span>[] bArray = <span class="keyword">new</span> <span class="title class_">BigInteger</span>(<span class="string">&quot;10&quot;</span> + hex, <span class="number">16</span>).toByteArray();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Copy all the REAL bytes, not the &quot;first&quot;</span></span><br><span class="line">        <span class="type">byte</span>[] ret = <span class="keyword">new</span> <span class="title class_">byte</span>[bArray.length - <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; ret.length; i++)</span><br><span class="line">            ret[i] = bArray[i + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span>[] DIGITS_POWER</span><br><span class="line">    <span class="comment">// 0 1 2 3 4 5 6 7 8 9 10</span></span><br><span class="line">            = &#123; <span class="number">1</span>, <span class="number">10</span>, <span class="number">100</span>, <span class="number">1000</span>, <span class="number">10000</span>, <span class="number">100000</span>, <span class="number">1000000</span>, <span class="number">10000000</span>, <span class="number">100000000</span>, <span class="number">1000000000</span>, <span class="number">1000000000</span> &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * This method generates a TOTP value for the given</span></span><br><span class="line"><span class="comment">     * set of parameters.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key:          the shared secret, HEX encoded</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> time:         a value that reflects a time</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> returnDigits: number of digits to return</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: a numeric String in base 10 that includes</span></span><br><span class="line"><span class="comment">     *          &#123;<span class="doctag">@link</span> truncationDigits&#125; digits</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">generateTOTP</span><span class="params">(String key,</span></span><br><span class="line"><span class="params">            String time,</span></span><br><span class="line"><span class="params">            String returnDigits)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> generateTOTP(key, time, returnDigits, <span class="string">&quot;HmacSHA1&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * This method generates a TOTP value for the given</span></span><br><span class="line"><span class="comment">     * set of parameters.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key:          the shared secret, HEX encoded</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> time:         a value that reflects a time</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> returnDigits: number of digits to return</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: a numeric String in base 10 that includes</span></span><br><span class="line"><span class="comment">     *          &#123;<span class="doctag">@link</span> truncationDigits&#125; digits</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">generateTOTP256</span><span class="params">(String key,</span></span><br><span class="line"><span class="params">            String time,</span></span><br><span class="line"><span class="params">            String returnDigits)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> generateTOTP(key, time, returnDigits, <span class="string">&quot;HmacSHA256&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * This method generates a TOTP value for the given</span></span><br><span class="line"><span class="comment">     * set of parameters.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key:          the shared secret, HEX encoded</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> time:         a value that reflects a time</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> returnDigits: number of digits to return</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: a numeric String in base 10 that includes</span></span><br><span class="line"><span class="comment">     *          &#123;<span class="doctag">@link</span> truncationDigits&#125; digits</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">generateTOTP512</span><span class="params">(String key,</span></span><br><span class="line"><span class="params">            String time,</span></span><br><span class="line"><span class="params">            String returnDigits)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> generateTOTP(key, time, returnDigits, <span class="string">&quot;HmacSHA512&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * This method generates a TOTP value for the given</span></span><br><span class="line"><span class="comment">     * set of parameters.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key:          the shared secret, HEX encoded</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> time:         a value that reflects a time</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> returnDigits: number of digits to return</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> crypto:       the crypto function to use</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>: a numeric String in base 10 that includes</span></span><br><span class="line"><span class="comment">     *          &#123;<span class="doctag">@link</span> truncationDigits&#125; digits</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">generateTOTP</span><span class="params">(String key,</span></span><br><span class="line"><span class="params">            String time,</span></span><br><span class="line"><span class="params">            String returnDigits,</span></span><br><span class="line"><span class="params">            String crypto)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">codeDigits</span> <span class="operator">=</span> Integer.decode(returnDigits).intValue();</span><br><span class="line">        <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Using the counter</span></span><br><span class="line">        <span class="comment">// First 8 bytes are for the movingFactor</span></span><br><span class="line">        <span class="comment">// Compliant with base RFC 4226 (HOTP)</span></span><br><span class="line">        <span class="keyword">while</span> (time.length() &lt; <span class="number">16</span>)</span><br><span class="line">            time = <span class="string">&quot;0&quot;</span> + time;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Get the HEX in a Byte[]</span></span><br><span class="line">        <span class="type">byte</span>[] msg = hexStr2Bytes(time);</span><br><span class="line">        <span class="type">byte</span>[] k = hexStr2Bytes(key);</span><br><span class="line">        <span class="type">byte</span>[] hash = hmac_sha(crypto, k, msg);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// put selected bytes into result int</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">offset</span> <span class="operator">=</span> hash[hash.length - <span class="number">1</span>] &amp; <span class="number">0xf</span>;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">binary</span> <span class="operator">=</span> ((hash[offset] &amp; <span class="number">0x7f</span>) &lt;&lt; <span class="number">24</span>) |</span><br><span class="line">                ((hash[offset + <span class="number">1</span>] &amp; <span class="number">0xff</span>) &lt;&lt; <span class="number">16</span>) |</span><br><span class="line">                ((hash[offset + <span class="number">2</span>] &amp; <span class="number">0xff</span>) &lt;&lt; <span class="number">8</span>) |</span><br><span class="line">                (hash[offset + <span class="number">3</span>] &amp; <span class="number">0xff</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">otp</span> <span class="operator">=</span> binary % DIGITS_POWER[codeDigits];</span><br><span class="line"></span><br><span class="line">        result = Integer.toString(otp);</span><br><span class="line">        <span class="keyword">while</span> (result.length() &lt; codeDigits) &#123;</span><br><span class="line">            result = <span class="string">&quot;0&quot;</span> + result;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// Seed for HMAC-SHA1 - 20 bytes</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">seed</span> <span class="operator">=</span> <span class="string">&quot;3132333435363738393031323334353637383930&quot;</span>;</span><br><span class="line">        <span class="comment">// Seed for HMAC-SHA256 - 32 bytes</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">seed32</span> <span class="operator">=</span> <span class="string">&quot;3132333435363738393031323334353637383930&quot;</span> +</span><br><span class="line">                <span class="string">&quot;313233343536373839303132&quot;</span>;</span><br><span class="line">        <span class="comment">// Seed for HMAC-SHA512 - 64 bytes</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">seed64</span> <span class="operator">=</span> <span class="string">&quot;73656E2E79616E673936406F75746C6F6F6B2E636F6D48454E4E47454348414C4C454E4745303033&quot;</span>;</span><br><span class="line">        <span class="comment">// &quot;3132333435363738393031323334353637383930&quot; +</span></span><br><span class="line">        <span class="comment">//         &quot;3132333435363738393031323334353637383930&quot; +</span></span><br><span class="line">        <span class="comment">//         &quot;3132333435363738393031323334353637383930&quot; +</span></span><br><span class="line">        <span class="comment">//         &quot;31323334&quot;;</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">T0</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">long</span> <span class="variable">X</span> <span class="operator">=</span> <span class="number">30</span>;</span><br><span class="line">        <span class="type">long</span> testTime[] = &#123; Instant.now().toEpochMilli() / <span class="number">1000L</span> + <span class="number">30</span> &#125;; <span class="comment">// &#123; 30L, 59L, 1111111109L, 1111111111L,</span></span><br><span class="line">                <span class="comment">// 1234567890L, 2000000000L, 20000000000L &#125;;</span></span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">steps</span> <span class="operator">=</span> <span class="string">&quot;0&quot;</span>;</span><br><span class="line">        <span class="type">DateFormat</span> <span class="variable">df</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line">        df.setTimeZone(TimeZone.getTimeZone(<span class="string">&quot;UTC&quot;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            System.out.println(</span><br><span class="line">                    <span class="string">&quot;+---------------+-----------------------+&quot;</span> +</span><br><span class="line">                            <span class="string">&quot;------------------+--------+--------+&quot;</span>);</span><br><span class="line">            System.out.println(</span><br><span class="line">                    <span class="string">&quot;|  Time(sec)    |   Time (UTC format)   &quot;</span> +</span><br><span class="line">                            <span class="string">&quot;| Value of T(Hex)  |  TOTP  | Mode   |&quot;</span>);</span><br><span class="line">            System.out.println(</span><br><span class="line">                    <span class="string">&quot;+---------------+-----------------------+&quot;</span> +</span><br><span class="line">                            <span class="string">&quot;------------------+--------+--------+&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; testTime.length; i++) &#123;</span><br><span class="line">                <span class="type">long</span> <span class="variable">T</span> <span class="operator">=</span> (testTime[i] - T0) / X;</span><br><span class="line">                steps = Long.toHexString(T).toUpperCase();</span><br><span class="line">                <span class="keyword">while</span> (steps.length() &lt; <span class="number">16</span>)</span><br><span class="line">                    steps = <span class="string">&quot;0&quot;</span> + steps;</span><br><span class="line">                <span class="type">String</span> <span class="variable">fmtTime</span> <span class="operator">=</span> String.format(<span class="string">&quot;%1$-11s&quot;</span>, testTime[i]);</span><br><span class="line">                <span class="type">String</span> <span class="variable">utcTime</span> <span class="operator">=</span> df.format(<span class="keyword">new</span> <span class="title class_">Date</span>(testTime[i] * <span class="number">1000</span>));</span><br><span class="line">                System.out.print(<span class="string">&quot;|  &quot;</span> + fmtTime + <span class="string">&quot;  |  &quot;</span> + utcTime +</span><br><span class="line">                        <span class="string">&quot;  | &quot;</span> + steps + <span class="string">&quot; |&quot;</span>);</span><br><span class="line">                System.out.println(generateTOTP(seed, steps, <span class="string">&quot;8&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;HmacSHA1&quot;</span>) + <span class="string">&quot;| SHA1   |&quot;</span>);</span><br><span class="line">                System.out.print(<span class="string">&quot;|  &quot;</span> + fmtTime + <span class="string">&quot;  |  &quot;</span> + utcTime +</span><br><span class="line">                        <span class="string">&quot;  | &quot;</span> + steps + <span class="string">&quot; |&quot;</span>);</span><br><span class="line">                System.out.println(generateTOTP(seed32, steps, <span class="string">&quot;8&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;HmacSHA256&quot;</span>) + <span class="string">&quot;| SHA256 |&quot;</span>);</span><br><span class="line">                System.out.print(<span class="string">&quot;|  &quot;</span> + fmtTime + <span class="string">&quot;  |  &quot;</span> + utcTime +</span><br><span class="line">                        <span class="string">&quot;  | &quot;</span> + steps + <span class="string">&quot; |&quot;</span>);</span><br><span class="line">                System.out.println(generateTOTP(seed64, steps, <span class="string">&quot;10&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;HmacSHA512&quot;</span>) + <span class="string">&quot;| SHA512 |&quot;</span>);</span><br><span class="line"></span><br><span class="line">                System.out.println(</span><br><span class="line">                        <span class="string">&quot;+---------------+-----------------------+&quot;</span> +</span><br><span class="line">                                <span class="string">&quot;------------------+--------+--------+&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (<span class="keyword">final</span> Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Second, I should send my post with <a href="https://datatracker.ietf.org/doc/html/rfc2617#section-2">HTTP Basic Authentication (RFC 2617)</a>.<br>The use-id is my email and password is the TOTP code. With the help of <a href="https://stackoverflow.com/questions/20803339/basic-authorization-command-for-curl">this StackOverflow question: basic authorization command for curl</a>, there is 2 options to do this.</p>
<ol>
<li>Manually get Base64 encoded string and send it.</li>
</ol>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">I tested on a Mac OS.</span></span><br><span class="line">echo -ne &quot;sen.yang96@outlook.com:&lt;TOTP 10 digits code&gt;&quot; | base64</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">output is something like this: c2VuLnlhbmc5NkBvdXRsb29rLmNvbTo4MzUzMDkyMA==</span></span><br><span class="line">curl -d &#x27;&#123;  &quot;github_url&quot;: &quot;https://gist.github.com/YoungForest/329c22200e7fad36e6ef984e3afe0325&quot;,  &quot;contact_email&quot;: &quot;sen.yang96@outlook.com&quot;,  &quot;solution_language&quot;: &quot;python&quot;&#125;&#x27; -H &#x27;Content-Type: application/json&#x27; -H &#x27;Authorization: Basic &lt;Base64 string&gt;&#x27; https://api.challenge.hennge.com/challenges/003</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>CURL could help you do the Base64 encoding.<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">curl -d &#x27;&#123;  &quot;github_url&quot;: &quot;https://gist.github.com/YoungForest/329c22200e7fad36e6ef984e3afe0325&quot;,  &quot;contact_email&quot;: &quot;sen.yang96@outlook.com&quot;,  &quot;solution_language&quot;: &quot;python&quot;&#125;&#x27; -H &#x27;Content-Type: application/json&#x27; -u sen.yang96@outlook.com:&lt;TOTP 10 digits code&gt; https://api.challenge.hennge.com/challenges/003</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="Follow-up"><a href="#Follow-up" class="headerlink" title="Follow up"></a>Follow up</h2><p>After the congratulations response, I received a link by email to submit my Resume and CV.<br>It was my first time to do the challenge in a job application. I had done some homeworks/assignments and OA tests before. This challenge is so different and interesting. Through it, I learned a lot about TOTP and HTTP authentication.</p>
]]></content>
      <categories>
        <category>interview</category>
      </categories>
      <tags>
        <tag>Hennge</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCode biweekly contest 61</title>
    <url>/en/2021/09/22/LeetCode-biweekly-contest-61/</url>
    <content><![CDATA[<p><a href="https://leetcode.com/contest/biweekly-contest-61">LeetCode biweekly contest 61</a></p>
]]></content>
  </entry>
  <entry>
    <title>LeetCode weekly contest 258</title>
    <url>/en/2021/09/15/LeetCode-weekly-contest-258/</url>
    <content><![CDATA[<table>
<thead>
<tr>
<th>Rank</th>
<th>Name</th>
<th>Score</th>
<th>Finish Time</th>
<th>Q1 (3)</th>
<th>Q2 (4)</th>
<th>Q3 (5)</th>
<th>Q4 (6)</th>
</tr>
</thead>
<tbody><tr>
<td>540 / 12179</td>
<td>YoungForest</td>
<td>12</td>
<td>0:19:13</td>
<td>0:02:46</td>
<td>0:12:18</td>
<td>0:19:13</td>
<td>null</td>
</tr>
</tbody></table>
<p>From this week, I will write my summary posts for the LeetCode weekly and biweekly contests in English. Before this, I have written more than 100 LeetCode contests summary posts in Chinese. For future international interviews and jobs opportunities, I believe writing English LeetCode summary is a good way to improve my expression and algorithm.</p>
]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>Competitive Programming</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCode weekly contest 259</title>
    <url>/en/2021/09/22/LeetCode-weekly-contest-259/</url>
    <content><![CDATA[<p><a href="https://leetcode.com/contest/weekly-contest-259/">LeetCode weekly contest 259</a></p>
<p>This weekend is Chinese mid-autumn festival, which is a tradition day to got together with family. I am a country boy. My family live in another province, Shanxi. It is about 1,000 km far from Beijing, where I studied and work. Because of that, I cannot visit my parents. Fortunately, my girlfriend grow in Beijing. Her parents invite us to their home for lunch and dinner. They prepared much seafood because their daughter loves it. This is my excuse for not attending this contest.<br>I solved those problems after contest and share my intuitions and solutions now.</p>
<p>So no score board here.</p>
<h2 id="2011-Final-Value-of-Variable-After-Performing-Operations"><a href="#2011-Final-Value-of-Variable-After-Performing-Operations" class="headerlink" title="2011. Final Value of Variable After Performing Operations"></a>2011. Final Value of Variable After Performing Operations</h2><p>Sign-in question. A trick, which could reduce 4 operations to 2, is that the middle character (operations[i][1]) decides increment or decrement. With this, we could simplify our code.</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">finalValueAfterOperations</span><span class="params">(vector&lt;string&gt;&amp; operations)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">const</span> <span class="keyword">auto</span>&amp; s : operations) &#123;</span><br><span class="line">            <span class="keyword">if</span> (s[<span class="number">1</span>] == <span class="string">&#x27;-&#x27;</span>) &#123;</span><br><span class="line">                --ans;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                ++ans;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>Time complexity: O(N), where <code>N = operations.size()</code><br>Space complexity: O(1).</p>
<h2 id="2012-Sum-of-Beauty-in-the-Array"><a href="#2012-Sum-of-Beauty-in-the-Array" class="headerlink" title="2012. Sum of Beauty in the Array"></a>2012. Sum of Beauty in the Array</h2><p>For score is 2, compare <code>nums[i]</code> with the largest number before <code>i</code> and the smallest number after <code>i</code>. We maintain a variable to record and update <code>the largest number</code> and a pre-calculate array to record <code>the smallest number</code>.</p>
<p>For score is 1, just compare <code>nums[i]</code> with <code>nums[i-1]</code> and <code>nums[i+1]</code>.</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">sumOfBeauties</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="type">const</span> <span class="type">int</span> n = nums.<span class="built_in">size</span>();</span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">smallestNumber</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">        smallestNumber[n] = numeric_limits&lt;<span class="type">int</span>&gt;::<span class="built_in">max</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = n<span class="number">-1</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">            smallestNumber[i] = <span class="built_in">min</span>(nums[i], smallestNumber[i+<span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> largestNumber = nums[<span class="number">0</span>];</span><br><span class="line">        <span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; n - <span class="number">1</span>; ++i) &#123;</span><br><span class="line">            <span class="type">int</span> score = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">if</span> (largestNumber &lt; nums[i] &amp;&amp; nums[i] &lt; smallestNumber[i+<span class="number">1</span>]) &#123;</span><br><span class="line">                score = <span class="number">2</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (nums[i<span class="number">-1</span>] &lt; nums[i] &amp;&amp; nums[i] &lt; nums[i+<span class="number">1</span>]) &#123;</span><br><span class="line">                score = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            largestNumber = <span class="built_in">max</span>(largestNumber, nums[i]);</span><br><span class="line">            ans += score;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>Time complexity: O(n),<br>Space complexity: O(n).</p>
<h2 id="2013-Detect-Squares"><a href="#2013-Detect-Squares" class="headerlink" title="2013. Detect Squares"></a>2013. Detect Squares</h2><p>Attention: <strong>Square</strong> instead of <strong>rectangle</strong>.<br>I wasted a lot of time because of this misunderstanding. Luckily, it is not on real contest.</p>
<p>Use <code>unordered_map&lt;int, map&lt;int, int&gt;&gt;</code> to store all points.<br>When count squares, we iterate every row and find the width, then with width find the other two points.</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">DetectSquares</span> &#123;</span><br><span class="line">    <span class="type">static</span> <span class="keyword">constexpr</span> <span class="type">int</span> MX = <span class="number">1001</span>;</span><br><span class="line">    unordered_map&lt;<span class="type">int</span>, map&lt;<span class="type">int</span>, <span class="type">int</span>&gt;&gt; points;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">DetectSquares</span>() &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(vector&lt;<span class="type">int</span>&gt; point)</span> </span>&#123;</span><br><span class="line">        ++points[point[<span class="number">0</span>]][point[<span class="number">1</span>]];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">count</span><span class="params">(vector&lt;<span class="type">int</span>&gt; point)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// iterate in Y axis, iterate in X axis</span></span><br><span class="line">        <span class="comment">// time complexity: n</span></span><br><span class="line">        <span class="type">const</span> <span class="type">int</span> x = point[<span class="number">0</span>];</span><br><span class="line">        <span class="type">const</span> <span class="type">int</span> y = point[<span class="number">1</span>];</span><br><span class="line">        <span class="type">const</span> <span class="keyword">auto</span>&amp; row = points[x];</span><br><span class="line">        <span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">const</span> <span class="keyword">auto</span>&amp; p : points) &#123;</span><br><span class="line">            <span class="keyword">if</span> (p.first == x) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="type">const</span> <span class="keyword">auto</span>&amp; row2 = p.second;</span><br><span class="line">            <span class="keyword">auto</span> it = row2.<span class="built_in">find</span>(y);</span><br><span class="line">            <span class="keyword">if</span> (it != row2.<span class="built_in">end</span>()) &#123;</span><br><span class="line">                <span class="comment">// find D</span></span><br><span class="line">                <span class="type">const</span> <span class="type">int</span> width = <span class="built_in">abs</span>(p.first - x);</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> i : &#123;+width, -width&#125;) &#123;</span><br><span class="line">                    <span class="keyword">auto</span> itB = row.<span class="built_in">find</span>(y + i);</span><br><span class="line">                    <span class="keyword">auto</span> itC = row2.<span class="built_in">find</span>(y + i);</span><br><span class="line">                    <span class="keyword">if</span> (itB != row.<span class="built_in">end</span>() &amp;&amp; itC != row2.<span class="built_in">end</span>()) &#123;</span><br><span class="line">                        ans += it-&gt;second * itB-&gt;second * itC -&gt; second;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Your DetectSquares object will be instantiated and called as such:</span></span><br><span class="line"><span class="comment"> * DetectSquares* obj = new DetectSquares();</span></span><br><span class="line"><span class="comment"> * obj-&gt;add(point);</span></span><br><span class="line"><span class="comment"> * int param_2 = obj-&gt;count(point);</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>

<p>Time complexity:</p>
<ul>
<li>DetectSquares: O(1),</li>
<li>add: O(log n),</li>
<li>count: O(n log n).<br>Space complexity: O(n).<br>Where n = points number.</li>
</ul>
<h2 id="2014-Longest-Subsequence-Repeated-k-Times"><a href="#2014-Longest-Subsequence-Repeated-k-Times" class="headerlink" title="2014. Longest Subsequence Repeated k Times"></a>2014. Longest Subsequence Repeated k Times</h2>]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>Competitive Programming</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCode weekly contest 264</title>
    <url>/en/2021/10/24/LeetCode-weekly-contest-264/</url>
    <content><![CDATA[<table>
<thead>
<tr>
<th>Rank</th>
<th>Name</th>
<th>Score</th>
<th>Finish Time</th>
<th>Q1 (3)</th>
<th>Q2 (4)</th>
<th>Q3 (5)</th>
<th>Q4 (6)</th>
</tr>
</thead>
<tbody><tr>
<td>323 / 12700</td>
<td>YoungForest</td>
<td>18</td>
<td>1:00:46</td>
<td>0:11:32 🐞1</td>
<td>0:27:23</td>
<td>0:42:54 🐞1</td>
<td>0:50:46</td>
</tr>
</tbody></table>
<p>After 6 weeks of cruel daily check in, I am finally free from solve the daily problem everyday in cruel group. The condition of free is that the contest rank is within top 500 in the world and solving all 4 problems in weekly contest. Congratulations on me.</p>
<h2 id="2047-Number-of-Valid-Words-in-a-Sentence"><a href="#2047-Number-of-Valid-Words-in-a-Sentence" class="headerlink" title="2047. Number of Valid Words in a Sentence"></a>2047. Number of Valid Words in a Sentence</h2><p>Sign on problem.<br>It is more difficult than usual. The corner case needs to be careful of. For example, ‘-‘ is not a valid word.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">countValidWords</span>(<span class="params">self, sentence: <span class="built_in">str</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">isPunctuation</span>(<span class="params">c</span>):</span><br><span class="line">            <span class="keyword">return</span> c == <span class="string">&#x27;!&#x27;</span> <span class="keyword">or</span> c == <span class="string">&#x27;.&#x27;</span> <span class="keyword">or</span> c == <span class="string">&#x27;,&#x27;</span></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">isLower</span>(<span class="params">c</span>):</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">ord</span>(c) &gt;= <span class="built_in">ord</span>(<span class="string">&#x27;a&#x27;</span>) <span class="keyword">and</span> <span class="built_in">ord</span>(c) &lt;= <span class="built_in">ord</span>(<span class="string">&#x27;z&#x27;</span>)</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">check</span>(<span class="params">word</span>):</span><br><span class="line">            <span class="comment"># It only contains lowercase letters, hyphens, and/or punctuation (no digits).</span></span><br><span class="line">            <span class="comment"># There is at most one hyphen &#x27;-&#x27;. If present, it should be surrounded by lowercase characters (&quot;a-b&quot; is valid, but &quot;-ab&quot; and &quot;ab-&quot; are not valid).</span></span><br><span class="line">            <span class="comment"># There is at most one punctuation mark. If present, it should be at the end of the token.</span></span><br><span class="line">            hyphenCount = <span class="number">0</span></span><br><span class="line">            punctuationCount = <span class="number">0</span></span><br><span class="line">            <span class="keyword">for</span> c <span class="keyword">in</span> word:</span><br><span class="line">                <span class="keyword">if</span> c == <span class="string">&#x27;-&#x27;</span>:</span><br><span class="line">                    hyphenCount += <span class="number">1</span></span><br><span class="line">                <span class="keyword">if</span> c.isdigit():</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">                <span class="keyword">if</span> isPunctuation(c):</span><br><span class="line">                    punctuationCount += <span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> hyphenCount &gt; <span class="number">1</span> <span class="keyword">or</span> punctuationCount &gt; <span class="number">1</span>: <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">            <span class="keyword">if</span> punctuationCount == <span class="number">1</span> <span class="keyword">and</span> <span class="keyword">not</span> isPunctuation(word[-<span class="number">1</span>]): <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">            <span class="keyword">if</span> hyphenCount == <span class="number">1</span>:</span><br><span class="line">                l = word.split(<span class="string">&#x27;-&#x27;</span>)</span><br><span class="line">                <span class="keyword">if</span> <span class="built_in">len</span>(l) != <span class="number">2</span>: <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">not</span> (<span class="built_in">len</span>(l[<span class="number">0</span>]) &gt;= <span class="number">1</span> <span class="keyword">and</span> isLower(l[<span class="number">0</span>][-<span class="number">1</span>])) <span class="keyword">or</span> <span class="keyword">not</span> (<span class="built_in">len</span>(l[<span class="number">1</span>]) &gt;= <span class="number">1</span> <span class="keyword">and</span> isLower(l[<span class="number">1</span>][<span class="number">0</span>])): <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        ans = <span class="number">0</span></span><br><span class="line">        words = sentence.split()</span><br><span class="line">        <span class="keyword">for</span> word <span class="keyword">in</span> words:</span><br><span class="line">            <span class="comment"># print (word)</span></span><br><span class="line">            <span class="keyword">if</span> check(word):</span><br><span class="line">                <span class="comment"># print(&#x27;Yes&#x27;)</span></span><br><span class="line">                ans += <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure>

<p>Time complexity: O(N),<br>Space complexity: O(N).</p>
<p>A easier solution is <code>re</code>, aka regular expression.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">countValidWords</span>(<span class="params">self, sentence: <span class="built_in">str</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        pattern = re.<span class="built_in">compile</span>(<span class="string">&#x27;(^[a-z]+(-[a-z]+)?)?[,.!]?$&#x27;</span>)</span><br><span class="line">        word_count = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> word <span class="keyword">in</span> sentence.split():</span><br><span class="line">            <span class="keyword">if</span> pattern.<span class="keyword">match</span>(word):</span><br><span class="line">                word_count = word_count + <span class="number">1</span></span><br><span class="line">                </span><br><span class="line">        <span class="keyword">return</span> word_count</span><br></pre></td></tr></table></figure>

<p>Time complexity: O(N),<br>Space complexity: O(N).</p>
<h2 id="2048-Next-Greater-Numerically-Balanced-Number"><a href="#2048-Next-Greater-Numerically-Balanced-Number" class="headerlink" title="2048. Next Greater Numerically Balanced Number"></a>2048. Next Greater Numerically Balanced Number</h2><p>Many people’s solutions are “Accepted” using brute force. Iterate every number greater than n, and check if it is numerically balanced.<br>I proposed a better solution in contest. Because of <code>0 &lt;= n &lt;= 10^6</code>, I manually enumerate all numerically balanced numbers and find the next greater one. The possible balance numbers is countable. One trick here is using <code>permutations</code> to iterate all permutations of a string.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">nextBeautifulNumber</span>(<span class="params">self, n: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        <span class="comment"># 1digit: 1</span></span><br><span class="line">        <span class="comment"># 2digit: 22</span></span><br><span class="line">        <span class="comment"># 3digit: 333 or 1+2</span></span><br><span class="line">        <span class="comment"># 4digit: 1+3 or 4</span></span><br><span class="line">        <span class="comment"># 5digit: 5 or 1+4 or 2+3</span></span><br><span class="line">        <span class="comment"># 6digit: 6 or 1+5 or 2+4 or 1+2+3</span></span><br><span class="line">        <span class="comment"># 7digit: 7 or 1+6 or 1+2+4 1224444</span></span><br><span class="line">        <span class="keyword">if</span> n == <span class="number">10</span>**<span class="number">6</span>: <span class="keyword">return</span> <span class="number">1224444</span></span><br><span class="line">        ans = <span class="number">1224444</span></span><br><span class="line">        s = <span class="built_in">str</span>(n)</span><br><span class="line">        <span class="comment"># 6! 720</span></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">check</span>(<span class="params">l</span>):</span><br><span class="line">            ans = <span class="built_in">float</span>(<span class="string">&#x27;inf&#x27;</span>)</span><br><span class="line">            origin = <span class="string">&#x27;&#x27;</span></span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> l:</span><br><span class="line">                origin += <span class="built_in">str</span>(i) * i</span><br><span class="line">            perms = [<span class="string">&#x27;&#x27;</span>.join(p) <span class="keyword">for</span> p <span class="keyword">in</span> permutations(origin)]</span><br><span class="line">            <span class="keyword">for</span> s <span class="keyword">in</span> perms:</span><br><span class="line">                i = <span class="built_in">int</span>(s)</span><br><span class="line">                <span class="keyword">if</span> i &gt; n:</span><br><span class="line">                    ans = <span class="built_in">min</span>(ans, i)</span><br><span class="line">            <span class="keyword">return</span> ans</span><br><span class="line">            </span><br><span class="line">        ans = <span class="built_in">min</span>(ans, check([<span class="number">6</span>]))</span><br><span class="line">        ans = <span class="built_in">min</span>(ans, check([<span class="number">1</span>, <span class="number">5</span>]))</span><br><span class="line">        ans = <span class="built_in">min</span>(ans, check([<span class="number">2</span>, <span class="number">4</span>]))</span><br><span class="line">        ans = <span class="built_in">min</span>(ans, check([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]))</span><br><span class="line">        ans = <span class="built_in">min</span>(ans, check([<span class="number">5</span>]))</span><br><span class="line">        ans = <span class="built_in">min</span>(ans, check([<span class="number">1</span>, <span class="number">4</span>]))</span><br><span class="line">        ans = <span class="built_in">min</span>(ans, check([<span class="number">2</span>, <span class="number">3</span>]))</span><br><span class="line">        ans = <span class="built_in">min</span>(ans, check([<span class="number">4</span>]))</span><br><span class="line">        ans = <span class="built_in">min</span>(ans, check([<span class="number">1</span>, <span class="number">3</span>]))</span><br><span class="line">        ans = <span class="built_in">min</span>(ans, check([<span class="number">3</span>]))</span><br><span class="line">        ans = <span class="built_in">min</span>(ans, check([<span class="number">1</span>, <span class="number">2</span>]))</span><br><span class="line">        ans = <span class="built_in">min</span>(ans, check([<span class="number">2</span>]))</span><br><span class="line">        ans = <span class="built_in">min</span>(ans, check([<span class="number">1</span>]))</span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure>
<p>Time complexity: O(13 * 6!),<br>Space complexity: O(6!).</p>
<h2 id="2049-Count-Nodes-With-the-Highest-Score"><a href="#2049-Count-Nodes-With-the-Highest-Score" class="headerlink" title="2049. Count Nodes With the Highest Score"></a>2049. Count Nodes With the Highest Score</h2><ol>
<li>We could use <code>DFS</code> to calculate every subtrees’ size. </li>
<li>Calculate the score of each node. 3 possible states when deleting a node: two children, one child, no child. A corner case is the root node. It do not have the parent.</li>
<li>Find the highest score and its frequency.</li>
</ol>
<p>A corner case is that the products could overflow <code>int</code>. It is <code>10^5 * 10^5</code> maximally. <code>long long</code> could avoid this runtime error easily.</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">ostream&amp; <span class="keyword">operator</span> &lt;&lt;(ostream&amp; out, <span class="type">const</span> vector&lt;T&gt;&amp; a) &#123;</span><br><span class="line">  out &lt;&lt; <span class="string">&quot;[&quot;</span>; <span class="type">bool</span> first = <span class="literal">true</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">auto</span>&amp; v : a) &#123; out &lt;&lt; (first ? <span class="string">&quot;&quot;</span> : <span class="string">&quot;, &quot;</span>); out &lt;&lt; v; first = <span class="number">0</span>;&#125; out &lt;&lt; <span class="string">&quot;]&quot;</span>;</span><br><span class="line">  <span class="keyword">return</span> out;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">using</span> ll = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">countHighestScoreNodes</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; parents)</span> </span>&#123;</span><br><span class="line">        <span class="type">const</span> <span class="type">int</span> n = parents.<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">children</span>(n);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="type">const</span> <span class="type">int</span> parent = parents[i];</span><br><span class="line">            children[parent].<span class="built_in">push_back</span>(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">const</span> <span class="type">int</span> root = <span class="number">0</span>;</span><br><span class="line">        vector&lt;vector&lt;ll&gt;&gt; <span class="built_in">subtreeSize</span>(n);</span><br><span class="line">        function&lt;ll(<span class="type">const</span> <span class="type">int</span>)&gt; dfs = [&amp;](<span class="type">const</span> <span class="type">int</span> root) -&gt; ll &#123;</span><br><span class="line">            ll ans = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> child : children[root]) &#123;</span><br><span class="line">                <span class="type">const</span> ll childSize = <span class="built_in">dfs</span>(child);</span><br><span class="line">                subtreeSize[root].<span class="built_in">push_back</span>(childSize);</span><br><span class="line">                ans += childSize;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> ans;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="type">const</span> ll totalSize = <span class="built_in">dfs</span>(<span class="number">0</span>);</span><br><span class="line">        <span class="function">vector&lt;ll&gt; <span class="title">scores</span><span class="params">(n)</span></span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (children[i].<span class="built_in">size</span>() == <span class="number">0</span>) &#123;</span><br><span class="line">                scores[i] = totalSize - <span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (children[i].<span class="built_in">size</span>() == <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (totalSize - <span class="number">1</span> == subtreeSize[i][<span class="number">0</span>]) &#123;</span><br><span class="line">                    scores[i] = subtreeSize[i][<span class="number">0</span>];</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    scores[i] = subtreeSize[i][<span class="number">0</span>] * (totalSize - <span class="number">1</span> - subtreeSize[i][<span class="number">0</span>]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (totalSize - <span class="number">1</span> - subtreeSize[i][<span class="number">0</span>] - subtreeSize[i][<span class="number">1</span>] == <span class="number">0</span>) &#123;</span><br><span class="line">                    scores[i] = subtreeSize[i][<span class="number">0</span>] * subtreeSize[i][<span class="number">1</span>];</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    scores[i] = subtreeSize[i][<span class="number">0</span>] * subtreeSize[i][<span class="number">1</span>] * (totalSize - <span class="number">1</span> - subtreeSize[i][<span class="number">0</span>] - subtreeSize[i][<span class="number">1</span>]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// cout &lt;&lt; scores &lt;&lt; endl;</span></span><br><span class="line">        <span class="type">const</span> ll highestScore = *<span class="built_in">max_element</span>(scores.<span class="built_in">begin</span>(), scores.<span class="built_in">end</span>());</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">count</span>(scores.<span class="built_in">begin</span>(), scores.<span class="built_in">end</span>(), highestScore);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>Time complexity: O(n),<br>Space complexity: O(n).</p>
<h2 id="2050-Parallel-Courses-III"><a href="#2050-Parallel-Courses-III" class="headerlink" title="2050. Parallel Courses III"></a>2050. Parallel Courses III</h2><p>Typical topo sort.<br>With <code>priority_queue</code>, we could iterate every course end events from time increasing.</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">minimumTime</span><span class="params">(<span class="type">int</span> n, vector&lt;vector&lt;<span class="type">int</span>&gt;&gt;&amp; relations, vector&lt;<span class="type">int</span>&gt;&amp; time)</span> </span>&#123;</span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">indegree</span><span class="params">(n, <span class="number">0</span>)</span></span>;</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">out</span>(n);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">const</span> <span class="keyword">auto</span>&amp; r : relations) &#123;</span><br><span class="line">            <span class="type">const</span> <span class="type">int</span> p = r[<span class="number">0</span>] - <span class="number">1</span>;</span><br><span class="line">            <span class="type">const</span> <span class="type">int</span> n = r[<span class="number">1</span>] - <span class="number">1</span>;</span><br><span class="line">            indegree[n]++;</span><br><span class="line">            out[p].<span class="built_in">push_back</span>(n);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">using</span> pii = pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt;; <span class="comment">// end time, course number</span></span><br><span class="line">        priority_queue&lt;pii, vector&lt;pii&gt;, greater&lt;&gt;&gt; events;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (indegree[i] == <span class="number">0</span>) &#123;</span><br><span class="line">                events.<span class="built_in">push</span>(&#123;time[i], i&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (!events.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">            <span class="keyword">auto</span> [currentTime, courseNumber] = events.<span class="built_in">top</span>();</span><br><span class="line">            ans = currentTime;</span><br><span class="line">            events.<span class="built_in">pop</span>();</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> to : out[courseNumber]) &#123;</span><br><span class="line">                indegree[to]--;</span><br><span class="line">                <span class="keyword">if</span> (indegree[to] == <span class="number">0</span>) &#123;</span><br><span class="line">                    events.<span class="built_in">push</span>(&#123;currentTime + time[to], to&#125;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>Time complexity: O(N * logN),<br>Space complexity: O(N).</p>
]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>Competitive Programming</tag>
      </tags>
  </entry>
  <entry>
    <title>Migrate from Travis CI to Github Action</title>
    <url>/en/2021/12/18/Migrate-from-Travis-CI-to-Github-Action/</url>
    <content><![CDATA[<p>Two months ago, I configured Travis CI to automatically deploy my blog in<br><a href="https://youngforest.github.io/en/2021/10/09/Travis-CI-Hexo-Automatically-Deploy/">Travis CI Hexo Automatically Deploy</a>.<br>However, I found it do not work this month. Unfortunately, Travis do not support free build for public repos now. I have to migrate to Github Action in order to auto CD.</p>
<p>I followed <a href="https://sanonz.github.io/2020/deploy-a-hexo-blog-from-github-actions/">this post</a> to do that. Some changes should be applied in <code>deploy.yml</code> file, especially <strong>theme</strong>.<br>For example, <a href="https://github.com/YoungForest/Hexo/blob/master/.github/workflows/deploy.yml">my Chinese blog <code>deploy.yml</code></a> and <a href="https://github.com/YoungForest/en/blob/master/.github/workflows/deploy.yml">my English blog <code>deploy.yml</code></a>.</p>
<p>Close auto build in <a href="https://app.travis-ci.com/">Travis CI Dashboard</a>: Your repos -&gt; Setting -&gt; General -&gt; uncheck <strong>Build pushed branches</strong> and <strong>Build pushed pull requests</strong>.</p>
]]></content>
  </entry>
  <entry>
    <title>Travis CI + Hexo Automatically Deploy</title>
    <url>/en/2021/10/09/Travis-CI-Hexo-Automatically-Deploy/</url>
    <content><![CDATA[<p><a href="https://hexo.io/docs/">Hexo</a> is a powerful blog engine. It is a good choice for a personal blog. I have used it for 5 years. Recently, I setup <a href="https://youngforest.github.io/en">my English site</a> besides <a href="https://youngforest.github.io/">the original Chinese site</a>. With 2 sites, it is more work to write, git and deploy.<br>Fortunately, there is a better solution for this problem. We could use <a href="https://travis-ci.com/">Travis CI</a> to automatically deploy the blog. The remain work is writing posts and git commit and push them. The CI would help us to deploy sites automatically.</p>
<span id="more"></span>

<h2 id="How-to-configure-that"><a href="#How-to-configure-that" class="headerlink" title="How to configure that?"></a>How to configure that?</h2><p><a href="https://education.travis-ci.com/">Sign up for Travis CI using Github account</a>.</p>
<p>With <a href="https://education.github.com/pack/offers">Github education package</a>, you could have the benefit to private builds for free while you’re a student. But it is only an optional choice, you can still use Travis CI without it.</p>
<p><a href="https://app.travis-ci.com/account/repositories">Give Travis CI the permission to access your Github repositories</a>.</p>
<p>In <a href="https://github.com/settings/tokens">Personal access tokens</a>, generate a token for Travis CI with <code>repo</code> scopes. Copy the token.</p>
<p>In <a href="https://app.travis-ci.com/account/repositories">Travis CI repositories page</a>, select your <strong>Hexo</strong> repo and click on <strong>Settings</strong>. In <strong>Environment Variables</strong> section, <strong>Add</strong> a new variable with <strong>NAME</strong> is <code>GH_TOKEN</code>, <strong>VALUE</strong> is the token you copied in the last step.</p>
<p>Create a file named <code>.travis.yml</code> in your Hexo repo. Refer to following content and change the value as your situation. I added some comments for help.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">os: linux</span><br><span class="line">language: node_js </span><br><span class="line">node_js:</span><br><span class="line">  - 12  # using nodejs LTS v12</span><br><span class="line">branches:</span><br><span class="line">  only:</span><br><span class="line">    - master # only monitor master branch</span><br><span class="line">cache:</span><br><span class="line">  directories:</span><br><span class="line">    - node_modules # cache node_modules to speed up build process</span><br><span class="line">before_script: ## According to your theme and custom configuration, update the script</span><br><span class="line">  - npm install -g hexo-cli # install Hexo in CI environment</span><br><span class="line">  - cd themes </span><br><span class="line">  - git clone https://github.com/next-theme/hexo-theme-next.git next # We do not commit the themes/next folder. Therefore, pull it every time.</span><br><span class="line">  - cd next</span><br><span class="line">  - npm install # install next dependencies</span><br><span class="line">  - cd ../.. # return the root folder</span><br><span class="line">  - npm install # install the dependencies</span><br><span class="line">script: </span><br><span class="line">  - hexo generate # generate static files</span><br><span class="line">deploy: # reference: https://docs.travis-ci.com/user/deployment/pages/</span><br><span class="line">  provider: pages</span><br><span class="line">  skip_cleanup: true # not clean after build</span><br><span class="line">  token: $GH_TOKEN # the variable you set in last step</span><br><span class="line">  keep_history: true</span><br><span class="line">  # fqdn: blog.ne0ng.page # custom domain，delete this field if using username.github.io</span><br><span class="line">  repo: YoungForest/youngforest.github.io # the repo you want to deploy. If this field is not set manually, the default value is current repo. Sometimes, the site repo is the same with the source files but in different branches.</span><br><span class="line">  on:</span><br><span class="line">    branch: master # sources files is in master branch</span><br><span class="line">  local_dir: public </span><br><span class="line">  target_branch: master # the branch of generated files. If using `username.github.io` repo, it has to be master. Otherwise, change it to your github pages branch.</span><br></pre></td></tr></table></figure>

<p>Once you push the <code>.travis.yml</code> file to your repo, you can see the build status in <a href="https://app.travis-ci.com/">Travis CI</a>. Once it complete, check your site repo and access your blog to see the update.</p>
]]></content>
      <categories>
        <category>Tech Sharing</category>
      </categories>
      <tags>
        <tag>Blog</tag>
      </tags>
  </entry>
  <entry>
    <title>Best implement to use pair as key to std::unordered_map in C++</title>
    <url>/en/2020/05/27/best-implement-to-use-pair-as-key-to-std-unordered-map-in-C/</url>
    <content><![CDATA[<p>Reference: <a href="https://www.mica.edu.vn/perso/Vu-Hai/EE3490/Ref/The%20C++Standard%20Library%20-%202nd%20Edition.pdf">C++ Standard Library: A tutorial and reference, Second version</a> Chapter 7.9.2: Creating and Controlling unordered Container</p>
<p>All solutions I found in Google use <code>XOR</code> to generate hashcode of <code>pair</code>, which is totally bad. see <a href="https://stackoverflow.com/questions/5889238/why-is-xor-the-default-way-to-combine-hashes">why-is-xor-the-default-way-to-combine-hashes</a>. However, the book has given us the best solution, using <code>hash_combine</code>, which is taken from <code>Boost</code>. The solution is much better than XOR when I tested it in Online Judge(<a href="https://atcoder.jp/contests/abc168/tasks/abc168_e">Atcoder</a>). I organized the code as a template as follow. You can copy and paste it as much as you can. And it is convenient to change it to fit any custom struct/class.</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="comment">// from boost (functional/hash):</span></span><br><span class="line"><span class="comment">// see http://www.boost.org/doc/libs/1_35_0/doc/html/hash/combine.html template</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">hash_combine</span><span class="params">(std::<span class="type">size_t</span> &amp;seed, <span class="type">const</span> T &amp;val)</span> </span>&#123;</span><br><span class="line">    seed ^= std::<span class="built_in">hash</span>&lt;T&gt;()(val) + <span class="number">0x9e3779b9</span> + (seed &lt;&lt; <span class="number">6</span>) + (seed &gt;&gt; <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// auxiliary generic functions to create a hash value using a seed</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">hash_val</span><span class="params">(std::<span class="type">size_t</span> &amp;seed, <span class="type">const</span> T &amp;val)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">hash_combine</span>(seed, val);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span>... Types&gt;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">hash_val</span><span class="params">(std::<span class="type">size_t</span> &amp;seed, <span class="type">const</span> T &amp;val, <span class="type">const</span> Types &amp;... args)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">hash_combine</span>(seed, val);</span><br><span class="line">    <span class="built_in">hash_val</span>(seed, args...);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span>... Types&gt;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> std::<span class="type">size_t</span> <span class="title">hash_val</span><span class="params">(<span class="type">const</span> Types &amp;... args)</span> </span>&#123;</span><br><span class="line">    std::<span class="type">size_t</span> seed = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">hash_val</span>(seed, args...);</span><br><span class="line">    <span class="keyword">return</span> seed;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">pair_hash</span> &#123;</span><br><span class="line">    <span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line">    <span class="function">std::<span class="type">size_t</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">const</span> std::pair&lt;T1, T2&gt; &amp;p)</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">hash_val</span>(p.first, p.second);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">using</span> ll = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    unordered_map&lt;pair&lt;ll, ll&gt;, ll, pair_hash&gt; slopeCount;</span><br><span class="line">    unordered_set&lt;pair&lt;ll, ll&gt;, pair_hash&gt; seen;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>There is a hash implementation for <code>Tuple</code>. I updated the answer in<a href="https://stackoverflow.com/a/62035742/6393787">StackOverflow</a>。Please go there if you need hash tuple.</p>
]]></content>
      <categories>
        <category>Programming</category>
      </categories>
      <tags>
        <tag>C++</tag>
        <tag>hash</tag>
        <tag>unordered_map</tag>
      </tags>
  </entry>
</search>
