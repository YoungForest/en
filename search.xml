<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>LeetCode biweekly contest 61</title>
    <url>/en/2021/09/22/LeetCode-biweekly-contest-61/</url>
    <content><![CDATA[<p><a href="https://leetcode.com/contest/biweekly-contest-61">LeetCode biweekly contest 61</a></p>
]]></content>
  </entry>
  <entry>
    <title>LeetCode weekly contest 258</title>
    <url>/en/2021/09/15/LeetCode-weekly-contest-258/</url>
    <content><![CDATA[<table>
<thead>
<tr>
<th>Rank</th>
<th>Name</th>
<th>Score</th>
<th>Finish Time</th>
<th>Q1 (3)</th>
<th>Q2 (4)</th>
<th>Q3 (5)</th>
<th>Q4 (6)</th>
</tr>
</thead>
<tbody><tr>
<td>540 / 12179</td>
<td>YoungForest</td>
<td>12</td>
<td>0:19:13</td>
<td>0:02:46</td>
<td>0:12:18</td>
<td>0:19:13</td>
<td>null</td>
</tr>
</tbody></table>
<p>From this week, I will write my summary posts for the LeetCode weekly and biweekly contests in English. Before this, I have written more than 100 LeetCode contests summary posts in Chinese. For future international interviews and jobs opportunities, I believe writing English LeetCode summary is a good way to improve my expression and algorithm.</p>
]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>Competitive Programming</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCode weekly contest 259</title>
    <url>/en/2021/09/22/LeetCode-weekly-contest-259/</url>
    <content><![CDATA[<p><a href="https://leetcode.com/contest/weekly-contest-259/">LeetCode weekly contest 259</a></p>
<p>This weekend is Chinese mid-autumn festival, which is a tradition day to got together with family. I am a country boy. My family live in another province, Shanxi. It is about 1,000 km far from Beijing, where I studied and work. Because of that, I cannot visit my parents. Fortunately, my girlfriend grow in Beijing. Her parents invite us to their home for lunch and dinner. They prepared much seafood because their daughter loves it. This is my excuse for not attending this contest.<br>I solved those problems after contest and share my intuitions and solutions now.</p>
<p>So no score board here.</p>
<h2 id="2011-Final-Value-of-Variable-After-Performing-Operations"><a href="#2011-Final-Value-of-Variable-After-Performing-Operations" class="headerlink" title="2011. Final Value of Variable After Performing Operations"></a>2011. Final Value of Variable After Performing Operations</h2><p>Sign-in question. A trick, which could reduce 4 operations to 2, is that the middle character (operations[i][1]) decides increment or decrement. With this, we could simplify our code.</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">finalValueAfterOperations</span><span class="params">(vector&lt;string&gt;&amp; operations)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; s : operations) &#123;</span><br><span class="line">            <span class="keyword">if</span> (s[<span class="number">1</span>] == <span class="string">&#x27;-&#x27;</span>) &#123;</span><br><span class="line">                --ans;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                ++ans;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>Time complexity: O(N), where <code>N = operations.size()</code><br>Space complexity: O(1).</p>
<h2 id="2012-Sum-of-Beauty-in-the-Array"><a href="#2012-Sum-of-Beauty-in-the-Array" class="headerlink" title="2012. Sum of Beauty in the Array"></a>2012. Sum of Beauty in the Array</h2><p>For score is 2, compare <code>nums[i]</code> with the largest number before <code>i</code> and the smallest number after <code>i</code>. We maintain a variable to record and update <code>the largest number</code> and a pre-calculate array to record <code>the smallest number</code>.</p>
<p>For score is 1, just compare <code>nums[i]</code> with <code>nums[i-1]</code> and <code>nums[i+1]</code>.</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">sumOfBeauties</span><span class="params">(vector&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">const</span> <span class="keyword">int</span> n = nums.<span class="built_in">size</span>();</span><br><span class="line">        <span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">smallestNumber</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">        smallestNumber[n] = numeric_limits&lt;<span class="keyword">int</span>&gt;::<span class="built_in">max</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = n<span class="number">-1</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">            smallestNumber[i] = <span class="built_in">min</span>(nums[i], smallestNumber[i+<span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> largestNumber = nums[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n - <span class="number">1</span>; ++i) &#123;</span><br><span class="line">            <span class="keyword">int</span> score = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">if</span> (largestNumber &lt; nums[i] &amp;&amp; nums[i] &lt; smallestNumber[i+<span class="number">1</span>]) &#123;</span><br><span class="line">                score = <span class="number">2</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (nums[i<span class="number">-1</span>] &lt; nums[i] &amp;&amp; nums[i] &lt; nums[i+<span class="number">1</span>]) &#123;</span><br><span class="line">                score = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            largestNumber = <span class="built_in">max</span>(largestNumber, nums[i]);</span><br><span class="line">            ans += score;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>Time complexity: O(n),<br>Space complexity: O(n).</p>
<h2 id="2013-Detect-Squares"><a href="#2013-Detect-Squares" class="headerlink" title="2013. Detect Squares"></a>2013. Detect Squares</h2><p>Attention: <strong>Square</strong> instead of <strong>rectangle</strong>.<br>I wasted a lot of time because of this misunderstanding. Luckily, it is not on real contest.</p>
<p>Use <code>unordered_map&lt;int, map&lt;int, int&gt;&gt;</code> to store all points.<br>When count squares, we iterate every row and find the width, then with width find the other two points.</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DetectSquares</span> &#123;</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">constexpr</span> <span class="keyword">int</span> MX = <span class="number">1001</span>;</span><br><span class="line">    unordered_map&lt;<span class="keyword">int</span>, map&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;&gt; points;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">DetectSquares</span>() &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(vector&lt;<span class="keyword">int</span>&gt; point)</span> </span>&#123;</span><br><span class="line">        ++points[point[<span class="number">0</span>]][point[<span class="number">1</span>]];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">count</span><span class="params">(vector&lt;<span class="keyword">int</span>&gt; point)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// iterate in Y axis, iterate in X axis</span></span><br><span class="line">        <span class="comment">// time complexity: n</span></span><br><span class="line">        <span class="keyword">const</span> <span class="keyword">int</span> x = point[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">const</span> <span class="keyword">int</span> y = point[<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">const</span> <span class="keyword">auto</span>&amp; row = points[x];</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; p : points) &#123;</span><br><span class="line">            <span class="keyword">if</span> (p.first == x) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">const</span> <span class="keyword">auto</span>&amp; row2 = p.second;</span><br><span class="line">            <span class="keyword">auto</span> it = row2.<span class="built_in">find</span>(y);</span><br><span class="line">            <span class="keyword">if</span> (it != row2.<span class="built_in">end</span>()) &#123;</span><br><span class="line">                <span class="comment">// find D</span></span><br><span class="line">                <span class="keyword">const</span> <span class="keyword">int</span> width = <span class="built_in">abs</span>(p.first - x);</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i : &#123;+width, -width&#125;) &#123;</span><br><span class="line">                    <span class="keyword">auto</span> itB = row.<span class="built_in">find</span>(y + i);</span><br><span class="line">                    <span class="keyword">auto</span> itC = row2.<span class="built_in">find</span>(y + i);</span><br><span class="line">                    <span class="keyword">if</span> (itB != row.<span class="built_in">end</span>() &amp;&amp; itC != row2.<span class="built_in">end</span>()) &#123;</span><br><span class="line">                        ans += it-&gt;second * itB-&gt;second * itC -&gt; second;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Your DetectSquares object will be instantiated and called as such:</span></span><br><span class="line"><span class="comment"> * DetectSquares* obj = new DetectSquares();</span></span><br><span class="line"><span class="comment"> * obj-&gt;add(point);</span></span><br><span class="line"><span class="comment"> * int param_2 = obj-&gt;count(point);</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>

<p>Time complexity:</p>
<ul>
<li>DetectSquares: O(1),</li>
<li>add: O(log n),</li>
<li>count: O(n log n).<br>Space complexity: O(n).<br>Where n = points number.</li>
</ul>
<h2 id="2014-Longest-Subsequence-Repeated-k-Times"><a href="#2014-Longest-Subsequence-Repeated-k-Times" class="headerlink" title="2014. Longest Subsequence Repeated k Times"></a>2014. Longest Subsequence Repeated k Times</h2>]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>Competitive Programming</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCode weekly contest 264</title>
    <url>/en/2021/10/24/LeetCode-weekly-contest-264/</url>
    <content><![CDATA[<table>
<thead>
<tr>
<th>Rank</th>
<th>Name</th>
<th>Score</th>
<th>Finish Time</th>
<th>Q1 (3)</th>
<th>Q2 (4)</th>
<th>Q3 (5)</th>
<th>Q4 (6)</th>
</tr>
</thead>
<tbody><tr>
<td>323 / 12700</td>
<td>YoungForest</td>
<td>18</td>
<td>1:00:46</td>
<td>0:11:32 üêû1</td>
<td>0:27:23</td>
<td>0:42:54 üêû1</td>
<td>0:50:46</td>
</tr>
</tbody></table>
<p>After 6 weeks of cruel daily check in, I am finally free from solve the daily problem everyday in cruel group. The condition of free is that the contest rank is within top 500 in the world and solving all 4 problems in weekly contest. Congratulations on me.</p>
<h2 id="2047-Number-of-Valid-Words-in-a-Sentence"><a href="#2047-Number-of-Valid-Words-in-a-Sentence" class="headerlink" title="2047. Number of Valid Words in a Sentence"></a>2047. Number of Valid Words in a Sentence</h2><p>Sign on problem.<br>It is more difficult than usual. The corner case needs to be careful of. For example, ‚Äò-‚Äò is not a valid word.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">countValidWords</span>(<span class="params">self, sentence: <span class="built_in">str</span></span>) -&gt; <span class="built_in">int</span>:</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">isPunctuation</span>(<span class="params">c</span>):</span></span><br><span class="line">            <span class="keyword">return</span> c == <span class="string">&#x27;!&#x27;</span> <span class="keyword">or</span> c == <span class="string">&#x27;.&#x27;</span> <span class="keyword">or</span> c == <span class="string">&#x27;,&#x27;</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">isLower</span>(<span class="params">c</span>):</span></span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">ord</span>(c) &gt;= <span class="built_in">ord</span>(<span class="string">&#x27;a&#x27;</span>) <span class="keyword">and</span> <span class="built_in">ord</span>(c) &lt;= <span class="built_in">ord</span>(<span class="string">&#x27;z&#x27;</span>)</span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">check</span>(<span class="params">word</span>):</span></span><br><span class="line">            <span class="comment"># It only contains lowercase letters, hyphens, and/or punctuation (no digits).</span></span><br><span class="line">            <span class="comment"># There is at most one hyphen &#x27;-&#x27;. If present, it should be surrounded by lowercase characters (&quot;a-b&quot; is valid, but &quot;-ab&quot; and &quot;ab-&quot; are not valid).</span></span><br><span class="line">            <span class="comment"># There is at most one punctuation mark. If present, it should be at the end of the token.</span></span><br><span class="line">            hyphenCount = <span class="number">0</span></span><br><span class="line">            punctuationCount = <span class="number">0</span></span><br><span class="line">            <span class="keyword">for</span> c <span class="keyword">in</span> word:</span><br><span class="line">                <span class="keyword">if</span> c == <span class="string">&#x27;-&#x27;</span>:</span><br><span class="line">                    hyphenCount += <span class="number">1</span></span><br><span class="line">                <span class="keyword">if</span> c.isdigit():</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">                <span class="keyword">if</span> isPunctuation(c):</span><br><span class="line">                    punctuationCount += <span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> hyphenCount &gt; <span class="number">1</span> <span class="keyword">or</span> punctuationCount &gt; <span class="number">1</span>: <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">            <span class="keyword">if</span> punctuationCount == <span class="number">1</span> <span class="keyword">and</span> <span class="keyword">not</span> isPunctuation(word[-<span class="number">1</span>]): <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">            <span class="keyword">if</span> hyphenCount == <span class="number">1</span>:</span><br><span class="line">                l = word.split(<span class="string">&#x27;-&#x27;</span>)</span><br><span class="line">                <span class="keyword">if</span> <span class="built_in">len</span>(l) != <span class="number">2</span>: <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">not</span> (<span class="built_in">len</span>(l[<span class="number">0</span>]) &gt;= <span class="number">1</span> <span class="keyword">and</span> isLower(l[<span class="number">0</span>][-<span class="number">1</span>])) <span class="keyword">or</span> <span class="keyword">not</span> (<span class="built_in">len</span>(l[<span class="number">1</span>]) &gt;= <span class="number">1</span> <span class="keyword">and</span> isLower(l[<span class="number">1</span>][<span class="number">0</span>])): <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        ans = <span class="number">0</span></span><br><span class="line">        words = sentence.split()</span><br><span class="line">        <span class="keyword">for</span> word <span class="keyword">in</span> words:</span><br><span class="line">            <span class="comment"># print (word)</span></span><br><span class="line">            <span class="keyword">if</span> check(word):</span><br><span class="line">                <span class="comment"># print(&#x27;Yes&#x27;)</span></span><br><span class="line">                ans += <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure>

<p>Time complexity: O(N),<br>Space complexity: O(N).</p>
<p>A easier solution is <code>re</code>, aka regular expression.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">countValidWords</span>(<span class="params">self, sentence: <span class="built_in">str</span></span>) -&gt; <span class="built_in">int</span>:</span></span><br><span class="line">        pattern = re.<span class="built_in">compile</span>(<span class="string">&#x27;(^[a-z]+(-[a-z]+)?)?[,.!]?$&#x27;</span>)</span><br><span class="line">        word_count = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> word <span class="keyword">in</span> sentence.split():</span><br><span class="line">            <span class="keyword">if</span> pattern.match(word):</span><br><span class="line">                word_count = word_count + <span class="number">1</span></span><br><span class="line">                </span><br><span class="line">        <span class="keyword">return</span> word_count</span><br></pre></td></tr></table></figure>

<p>Time complexity: O(N),<br>Space complexity: O(N).</p>
<h2 id="2048-Next-Greater-Numerically-Balanced-Number"><a href="#2048-Next-Greater-Numerically-Balanced-Number" class="headerlink" title="2048. Next Greater Numerically Balanced Number"></a>2048. Next Greater Numerically Balanced Number</h2><p>Many people‚Äôs solutions are ‚ÄúAccepted‚Äù using brute force. Iterate every number greater than n, and check if it is numerically balanced.<br>I proposed a better solution in contest. Because of <code>0 &lt;= n &lt;= 10^6</code>, I manually enumerate all numerically balanced numbers and find the next greater one. The possible balance numbers is countable. One trick here is using <code>permutations</code> to iterate all permutations of a string.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">nextBeautifulNumber</span>(<span class="params">self, n: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span></span><br><span class="line">        <span class="comment"># 1digit: 1</span></span><br><span class="line">        <span class="comment"># 2digit: 22</span></span><br><span class="line">        <span class="comment"># 3digit: 333 or 1+2</span></span><br><span class="line">        <span class="comment"># 4digit: 1+3 or 4</span></span><br><span class="line">        <span class="comment"># 5digit: 5 or 1+4 or 2+3</span></span><br><span class="line">        <span class="comment"># 6digit: 6 or 1+5 or 2+4 or 1+2+3</span></span><br><span class="line">        <span class="comment"># 7digit: 7 or 1+6 or 1+2+4 1224444</span></span><br><span class="line">        <span class="keyword">if</span> n == <span class="number">10</span>**<span class="number">6</span>: <span class="keyword">return</span> <span class="number">1224444</span></span><br><span class="line">        ans = <span class="number">1224444</span></span><br><span class="line">        s = <span class="built_in">str</span>(n)</span><br><span class="line">        <span class="comment"># 6! 720</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">check</span>(<span class="params">l</span>):</span></span><br><span class="line">            ans = <span class="built_in">float</span>(<span class="string">&#x27;inf&#x27;</span>)</span><br><span class="line">            origin = <span class="string">&#x27;&#x27;</span></span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> l:</span><br><span class="line">                origin += <span class="built_in">str</span>(i) * i</span><br><span class="line">            perms = [<span class="string">&#x27;&#x27;</span>.join(p) <span class="keyword">for</span> p <span class="keyword">in</span> permutations(origin)]</span><br><span class="line">            <span class="keyword">for</span> s <span class="keyword">in</span> perms:</span><br><span class="line">                i = <span class="built_in">int</span>(s)</span><br><span class="line">                <span class="keyword">if</span> i &gt; n:</span><br><span class="line">                    ans = <span class="built_in">min</span>(ans, i)</span><br><span class="line">            <span class="keyword">return</span> ans</span><br><span class="line">            </span><br><span class="line">        ans = <span class="built_in">min</span>(ans, check([<span class="number">6</span>]))</span><br><span class="line">        ans = <span class="built_in">min</span>(ans, check([<span class="number">1</span>, <span class="number">5</span>]))</span><br><span class="line">        ans = <span class="built_in">min</span>(ans, check([<span class="number">2</span>, <span class="number">4</span>]))</span><br><span class="line">        ans = <span class="built_in">min</span>(ans, check([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]))</span><br><span class="line">        ans = <span class="built_in">min</span>(ans, check([<span class="number">5</span>]))</span><br><span class="line">        ans = <span class="built_in">min</span>(ans, check([<span class="number">1</span>, <span class="number">4</span>]))</span><br><span class="line">        ans = <span class="built_in">min</span>(ans, check([<span class="number">2</span>, <span class="number">3</span>]))</span><br><span class="line">        ans = <span class="built_in">min</span>(ans, check([<span class="number">4</span>]))</span><br><span class="line">        ans = <span class="built_in">min</span>(ans, check([<span class="number">1</span>, <span class="number">3</span>]))</span><br><span class="line">        ans = <span class="built_in">min</span>(ans, check([<span class="number">3</span>]))</span><br><span class="line">        ans = <span class="built_in">min</span>(ans, check([<span class="number">1</span>, <span class="number">2</span>]))</span><br><span class="line">        ans = <span class="built_in">min</span>(ans, check([<span class="number">2</span>]))</span><br><span class="line">        ans = <span class="built_in">min</span>(ans, check([<span class="number">1</span>]))</span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure>
<p>Time complexity: O(13 * 6!),<br>Space complexity: O(6!).</p>
<h2 id="2049-Count-Nodes-With-the-Highest-Score"><a href="#2049-Count-Nodes-With-the-Highest-Score" class="headerlink" title="2049. Count Nodes With the Highest Score"></a>2049. Count Nodes With the Highest Score</h2><ol>
<li>We could use <code>DFS</code> to calculate every subtrees‚Äô size. </li>
<li>Calculate the score of each node. 3 possible states when deleting a node: two children, one child, no child. A corner case is the root node. It do not have the parent.</li>
<li>Find the highest score and its frequency.</li>
</ol>
<p>A corner case is that the products could overflow <code>int</code>. It is <code>10^5 * 10^5</code> maximally. <code>long long</code> could avoid this runtime error easily.</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">ostream&amp; <span class="keyword">operator</span> &lt;&lt;(ostream&amp; out, <span class="keyword">const</span> vector&lt;T&gt;&amp; a) &#123;</span><br><span class="line">  out &lt;&lt; <span class="string">&quot;[&quot;</span>; <span class="keyword">bool</span> first = <span class="literal">true</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">auto</span>&amp; v : a) &#123; out &lt;&lt; (first ? <span class="string">&quot;&quot;</span> : <span class="string">&quot;, &quot;</span>); out &lt;&lt; v; first = <span class="number">0</span>;&#125; out &lt;&lt; <span class="string">&quot;]&quot;</span>;</span><br><span class="line">  <span class="keyword">return</span> out;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">using</span> ll = <span class="keyword">long</span> <span class="keyword">long</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">countHighestScoreNodes</span><span class="params">(vector&lt;<span class="keyword">int</span>&gt;&amp; parents)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">const</span> <span class="keyword">int</span> n = parents.<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="keyword">int</span>&gt;&gt; <span class="built_in">children</span>(n);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="keyword">const</span> <span class="keyword">int</span> parent = parents[i];</span><br><span class="line">            children[parent].<span class="built_in">push_back</span>(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">const</span> <span class="keyword">int</span> root = <span class="number">0</span>;</span><br><span class="line">        vector&lt;vector&lt;ll&gt;&gt; <span class="built_in">subtreeSize</span>(n);</span><br><span class="line">        function&lt;<span class="built_in">ll</span>(<span class="keyword">const</span> <span class="keyword">int</span>)&gt; dfs = [&amp;](<span class="keyword">const</span> <span class="keyword">int</span> root) -&gt; ll &#123;</span><br><span class="line">            ll ans = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> child : children[root]) &#123;</span><br><span class="line">                <span class="keyword">const</span> ll childSize = <span class="built_in">dfs</span>(child);</span><br><span class="line">                subtreeSize[root].<span class="built_in">push_back</span>(childSize);</span><br><span class="line">                ans += childSize;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> ans;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">const</span> ll totalSize = <span class="built_in">dfs</span>(<span class="number">0</span>);</span><br><span class="line">        <span class="function">vector&lt;ll&gt; <span class="title">scores</span><span class="params">(n)</span></span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (children[i].<span class="built_in">size</span>() == <span class="number">0</span>) &#123;</span><br><span class="line">                scores[i] = totalSize - <span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (children[i].<span class="built_in">size</span>() == <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (totalSize - <span class="number">1</span> == subtreeSize[i][<span class="number">0</span>]) &#123;</span><br><span class="line">                    scores[i] = subtreeSize[i][<span class="number">0</span>];</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    scores[i] = subtreeSize[i][<span class="number">0</span>] * (totalSize - <span class="number">1</span> - subtreeSize[i][<span class="number">0</span>]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (totalSize - <span class="number">1</span> - subtreeSize[i][<span class="number">0</span>] - subtreeSize[i][<span class="number">1</span>] == <span class="number">0</span>) &#123;</span><br><span class="line">                    scores[i] = subtreeSize[i][<span class="number">0</span>] * subtreeSize[i][<span class="number">1</span>];</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    scores[i] = subtreeSize[i][<span class="number">0</span>] * subtreeSize[i][<span class="number">1</span>] * (totalSize - <span class="number">1</span> - subtreeSize[i][<span class="number">0</span>] - subtreeSize[i][<span class="number">1</span>]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// cout &lt;&lt; scores &lt;&lt; endl;</span></span><br><span class="line">        <span class="keyword">const</span> ll highestScore = *<span class="built_in">max_element</span>(scores.<span class="built_in">begin</span>(), scores.<span class="built_in">end</span>());</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">count</span>(scores.<span class="built_in">begin</span>(), scores.<span class="built_in">end</span>(), highestScore);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>Time complexity: O(n),<br>Space complexity: O(n).</p>
<h2 id="2050-Parallel-Courses-III"><a href="#2050-Parallel-Courses-III" class="headerlink" title="2050. Parallel Courses III"></a>2050. Parallel Courses III</h2><p>Typical topo sort.<br>With <code>priority_queue</code>, we could iterate every course end events from time increasing.</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">minimumTime</span><span class="params">(<span class="keyword">int</span> n, vector&lt;vector&lt;<span class="keyword">int</span>&gt;&gt;&amp; relations, vector&lt;<span class="keyword">int</span>&gt;&amp; time)</span> </span>&#123;</span><br><span class="line">        <span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">indegree</span><span class="params">(n, <span class="number">0</span>)</span></span>;</span><br><span class="line">        vector&lt;vector&lt;<span class="keyword">int</span>&gt;&gt; <span class="built_in">out</span>(n);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; r : relations) &#123;</span><br><span class="line">            <span class="keyword">const</span> <span class="keyword">int</span> p = r[<span class="number">0</span>] - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">const</span> <span class="keyword">int</span> n = r[<span class="number">1</span>] - <span class="number">1</span>;</span><br><span class="line">            indegree[n]++;</span><br><span class="line">            out[p].<span class="built_in">push_back</span>(n);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">using</span> pii = pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;; <span class="comment">// end time, course number</span></span><br><span class="line">        priority_queue&lt;pii, vector&lt;pii&gt;, greater&lt;&gt;&gt; events;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (indegree[i] == <span class="number">0</span>) &#123;</span><br><span class="line">                events.<span class="built_in">push</span>(&#123;time[i], i&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (!events.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">            <span class="keyword">auto</span> [currentTime, courseNumber] = events.<span class="built_in">top</span>();</span><br><span class="line">            ans = currentTime;</span><br><span class="line">            events.<span class="built_in">pop</span>();</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> to : out[courseNumber]) &#123;</span><br><span class="line">                indegree[to]--;</span><br><span class="line">                <span class="keyword">if</span> (indegree[to] == <span class="number">0</span>) &#123;</span><br><span class="line">                    events.<span class="built_in">push</span>(&#123;currentTime + time[to], to&#125;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>Time complexity: O(N * logN),<br>Space complexity: O(N).</p>
]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>Competitive Programming</tag>
      </tags>
  </entry>
  <entry>
    <title>Migrate from Travis CI to Github Action</title>
    <url>/en/2021/12/18/Migrate-from-Travis-CI-to-Github-Action/</url>
    <content><![CDATA[<p>Two months ago, I configured Travis CI to automatically deploy my blog in<br><a href="https://youngforest.github.io/en/2021/10/09/Travis-CI-Hexo-Automatically-Deploy/">Travis CI Hexo Automatically Deploy</a>.<br>However, I found it do not work this month. Unfortunately, Travis do not support free build for public repos now. I have to migrate to Github Action in order to auto CD.</p>
<p>I followed <a href="https://sanonz.github.io/2020/deploy-a-hexo-blog-from-github-actions/">this post</a> to do that. Some changes should be applied in <code>deploy.yml</code> file, especially <strong>theme</strong>.<br>For example, <a href="https://github.com/YoungForest/Hexo/blob/master/.github/workflows/deploy.yml">my Chinese blog <code>deploy.yml</code></a> and <a href="https://github.com/YoungForest/en/blob/master/.github/workflows/deploy.yml">my English blog <code>deploy.yml</code></a>.</p>
]]></content>
  </entry>
  <entry>
    <title>Travis CI + Hexo Automatically Deploy</title>
    <url>/en/2021/10/09/Travis-CI-Hexo-Automatically-Deploy/</url>
    <content><![CDATA[<p><a href="https://hexo.io/docs/">Hexo</a> is a powerful blog engine. It is a good choice for a personal blog. I have used it for 5 years. Recently, I setup <a href="https://youngforest.github.io/en">my English site</a> besides <a href="https://youngforest.github.io/">the original Chinese site</a>. With 2 sites, it is more work to write, git and deploy.<br>Fortunately, there is a better solution for this problem. We could use <a href="https://travis-ci.com/">Travis CI</a> to automatically deploy the blog. The remain work is writing posts and git commit and push them. The CI would help us to deploy sites automatically.</p>
<span id="more"></span>

<h2 id="How-to-configure-that"><a href="#How-to-configure-that" class="headerlink" title="How to configure that?"></a>How to configure that?</h2><p><a href="https://education.travis-ci.com/">Sign up for Travis CI using Github account</a>.</p>
<p>With <a href="https://education.github.com/pack/offers">Github education package</a>, you could have the benefit to private builds for free while you‚Äôre a student. But it is only an optional choice, you can still use Travis CI without it.</p>
<p><a href="https://app.travis-ci.com/account/repositories">Give Travis CI the permission to access your Github repositories</a>.</p>
<p>In <a href="https://github.com/settings/tokens">Personal access tokens</a>, generate a token for Travis CI with <code>repo</code> scopes. Copy the token.</p>
<p>In <a href="https://app.travis-ci.com/account/repositories">Travis CI repositories page</a>, select your <strong>Hexo</strong> repo and click on <strong>Settings</strong>. In <strong>Environment Variables</strong> section, <strong>Add</strong> a new variable with <strong>NAME</strong> is <code>GH_TOKEN</code>, <strong>VALUE</strong> is the token you copied in the last step.</p>
<p>Create a file named <code>.travis.yml</code> in your Hexo repo. Refer to following content and change the value as your situation. I added some comments for help.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">os: linux</span><br><span class="line">language: node_js </span><br><span class="line">node_js:</span><br><span class="line">  - 12  # using nodejs LTS v12</span><br><span class="line">branches:</span><br><span class="line">  only:</span><br><span class="line">    - master # only monitor master branch</span><br><span class="line">cache:</span><br><span class="line">  directories:</span><br><span class="line">    - node_modules # cache node_modules to speed up build process</span><br><span class="line">before_script: ## According to your theme and custom configuration, update the script</span><br><span class="line">  - npm install -g hexo-cli # install Hexo in CI environment</span><br><span class="line">  - cd themes </span><br><span class="line">  - git clone https://github.com/next-theme/hexo-theme-next.git next # We do not commit the themes/next folder. Therefore, pull it every time.</span><br><span class="line">  - cd next</span><br><span class="line">  - npm install # install next dependencies</span><br><span class="line">  - cd ../.. # return the root folder</span><br><span class="line">  - npm install # install the dependencies</span><br><span class="line">script: </span><br><span class="line">  - hexo generate # generate static files</span><br><span class="line">deploy: # reference: https://docs.travis-ci.com/user/deployment/pages/</span><br><span class="line">  provider: pages</span><br><span class="line">  skip_cleanup: true # not clean after build</span><br><span class="line">  token: $GH_TOKEN # the variable you set in last step</span><br><span class="line">  keep_history: true</span><br><span class="line">  # fqdn: blog.ne0ng.page # custom domainÔºådelete this field if using username.github.io</span><br><span class="line">  repo: YoungForest/youngforest.github.io # the repo you want to deploy. If this field is not set manually, the default value is current repo. Sometimes, the site repo is the same with the source files but in different branches.</span><br><span class="line">  on:</span><br><span class="line">    branch: master # sources files is in master branch</span><br><span class="line">  local_dir: public </span><br><span class="line">  target_branch: master # the branch of generated files. If using `username.github.io` repo, it has to be master. Otherwise, change it to your github pages branch.</span><br></pre></td></tr></table></figure>

<p>Once you push the <code>.travis.yml</code> file to your repo, you can see the build status in <a href="https://app.travis-ci.com/">Travis CI</a>. Once it complete, check your site repo and access your blog to see the update.</p>
]]></content>
      <categories>
        <category>Tech Sharing</category>
      </categories>
      <tags>
        <tag>Blog</tag>
      </tags>
  </entry>
  <entry>
    <title>Best implement to use pair as key to std::unordered_map in C++</title>
    <url>/en/2020/05/27/best-implement-to-use-pair-as-key-to-std-unordered-map-in-C/</url>
    <content><![CDATA[<p>Reference: <a href="https://www.mica.edu.vn/perso/Vu-Hai/EE3490/Ref/The%20C++Standard%20Library%20-%202nd%20Edition.pdf">C++ Standard Library: A tutorial and reference, Second version</a> Chapter 7.9.2: Creating and Controlling unordered Container</p>
<p>All solutions I found in Google use <code>XOR</code> to generate hashcode of <code>pair</code>, which is totally bad. see <a href="https://stackoverflow.com/questions/5889238/why-is-xor-the-default-way-to-combine-hashes">why-is-xor-the-default-way-to-combine-hashes</a>. However, the book has given us the best solution, using <code>hash_combine</code>, which is taken from <code>Boost</code>. The solution is much better than XOR when I tested it in Online Judge(<a href="https://atcoder.jp/contests/abc168/tasks/abc168_e">Atcoder</a>). I organized the code as a template as follow. You can copy and paste it as much as you can. And it is convenient to change it to fit any custom struct/class.</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="comment">// from boost (functional/hash):</span></span><br><span class="line"><span class="comment">// see http://www.boost.org/doc/libs/1_35_0/doc/html/hash/combine.html template</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">hash_combine</span><span class="params">(std::<span class="keyword">size_t</span> &amp;seed, <span class="keyword">const</span> T &amp;val)</span> </span>&#123;</span><br><span class="line">    seed ^= std::hash&lt;T&gt;()(val) + <span class="number">0x9e3779b9</span> + (seed &lt;&lt; <span class="number">6</span>) + (seed &gt;&gt; <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// auxiliary generic functions to create a hash value using a seed</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">hash_val</span><span class="params">(std::<span class="keyword">size_t</span> &amp;seed, <span class="keyword">const</span> T &amp;val)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">hash_combine</span>(seed, val);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span>... Types&gt;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">hash_val</span><span class="params">(std::<span class="keyword">size_t</span> &amp;seed, <span class="keyword">const</span> T &amp;val, <span class="keyword">const</span> Types &amp;... args)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">hash_combine</span>(seed, val);</span><br><span class="line">    <span class="built_in">hash_val</span>(seed, args...);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span>... Types&gt;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> std::<span class="keyword">size_t</span> <span class="title">hash_val</span><span class="params">(<span class="keyword">const</span> Types &amp;... args)</span> </span>&#123;</span><br><span class="line">    std::<span class="keyword">size_t</span> seed = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">hash_val</span>(seed, args...);</span><br><span class="line">    <span class="keyword">return</span> seed;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">pair_hash</span> &#123;</span></span><br><span class="line">    <span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T1</span>, <span class="keyword">class</span> <span class="title">T2</span>&gt;</span></span><br><span class="line">    <span class="function">std::<span class="keyword">size_t</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="keyword">const</span> std::pair&lt;T1, T2&gt; &amp;p)</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">hash_val</span>(p.first, p.second);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">using</span> ll = <span class="keyword">long</span> <span class="keyword">long</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    unordered_map&lt;pair&lt;ll, ll&gt;, ll, pair_hash&gt; slopeCount;</span><br><span class="line">    unordered_set&lt;pair&lt;ll, ll&gt;, pair_hash&gt; seen;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>There is a hash implementation for <code>Tuple</code>. I updated the answer in<a href="https://stackoverflow.com/a/62035742/6393787">StackOverflow</a>„ÄÇPlease go there if you need hash tuple.</p>
]]></content>
      <categories>
        <category>Programming</category>
      </categories>
      <tags>
        <tag>C++</tag>
        <tag>hash</tag>
        <tag>unordered_map</tag>
      </tags>
  </entry>
</search>
